<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>test2</title>
    <link rel="stylesheet" href="./bootstrap-5.3.8-dist/css/bootstrap.css">
    <link rel="stylesheet" href="./SP_css/BS_SP_header.css">
    <!-- <link rel="stylesheet" href="./bootstrap-5.3.8-examples/modals/modals.css"> -->

    <style>

    </style>

</head>

<body>



    <main class="container">

        <!-- 指數區 -->
        <section class="mt-2">
            <div class="border rounded shadow-sm p-3 mb-4">
                <h3 class="mb-3">市場指數(即時展示)</h3>
                <div id="market-table-js"></div>
                <div class="mt-2">
                    <a href="./market.html" class="btn btn-warning w-100">查看更多</a>
                </div>
            </div>
        </section>

        <!-- 新聞區 -->
        <section class="mt-2">
            <div class="row g-3">
                <div class="col-lg-4">
                    <div class="border rounded shadow-sm h-100 p-3 bg-white">
                        <h4 class="mb-3">國際新聞</h4>
                        <h4 class="mb-3"><a href="#" class="text-decoration-none text-dark">國際新聞</a></h4>
                        <div class="mb-3">
                            <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=400&q=80"
                                class="w-100 rounded" style="height:140px; object-fit:cover;" alt="國際新聞預覽圖">
                            <div class="mt-2 small text-secondary">路透社</div>
                            <div class="fw-bold mb-1">美國聯準會維持利率不變，全球市場反應正面</div>
                            <div class="small text-muted">1小時前</div>
                        </div>
                        <ul class="list-unstyled" id="news-intl">
                            <li class="mb-2"><a href="#" class="text-decoration-none">美國聯準會維持利率不變，全球市場反應正面</a></li>
                            <li class="mb-2"><a href="#" class="text-decoration-none">歐洲央行預計明年調整貨幣政策</a></li>
                            <li class="mb-2"><a href="#" class="text-decoration-none">中國出口數據回升，亞洲股市走揚</a></li>
                        </ul>
                        <div class="mt-2 text-end"></div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="border rounded shadow-sm h-100 p-3 bg-white">
                        <h4 class="mb-3">台灣新聞</h4>
                        <h4 class="mb-3"><a href="#" class="text-decoration-none text-dark">台灣新聞</a></h4>
                        <div class="mb-3">
                            <img src="https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=400&q=80"
                                class="w-100 rounded" style="height:140px; object-fit:cover;" alt="台灣新聞預覽圖">
                            <div class="mt-2 small text-secondary">中央社</div>
                            <div class="fw-bold mb-1">台積電宣布新廠投資計畫，股價創新高</div>
                            <div class="small text-muted">20分鐘前</div>
                        </div>
                        <ul class="list-unstyled" id="news-tw">
                            <li class="mb-2"><a href="#" class="text-decoration-none">台積電宣布新廠投資計畫，股價創新高</a></li>
                            <li class="mb-2"><a href="#" class="text-decoration-none">金管會推動金融科技創新實驗</a></li>
                            <li class="mb-2"><a href="#" class="text-decoration-none">台灣出口連續三月成長</a></li>
                        </ul>
                        <div class="mt-2 text-end"></div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="border rounded shadow-sm h-100 p-3 bg-white">
                        <h4 class="mb-3">產業新聞</h4>
                        <h4 class="mb-3"><a href="#" class="text-decoration-none text-dark">產業新聞</a></h4>
                        <div class="mb-3">
                            <img src="https://images.unsplash.com/photo-1519389950473-47ba0277781c?auto=format&fit=crop&w=400&q=80"
                                class="w-100 rounded" style="height:140px; object-fit:cover;" alt="產業新聞預覽圖">
                            <div class="mt-2 small text-secondary">工商時報</div>
                            <div class="fw-bold mb-1">AI 晶片需求強勁，半導體產業受惠</div>
                            <div class="small text-muted">2小時前</div>
                        </div>
                        <ul class="list-unstyled" id="news-industry">
                            <li class="mb-2"><a href="#" class="text-decoration-none">AI 晶片需求強勁，半導體產業受惠</a></li>
                            <li class="mb-2"><a href="#" class="text-decoration-none">電動車市場擴大，供應鏈加速轉型</a></li>
                            <li class="mb-2"><a href="#" class="text-decoration-none">綠能產業投資熱潮持續</a></li>
                        </ul>
                        <div class="mt-2 text-end"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 觀點區 -->
        <section class="mt-2">
            <div class="card border rounded shadow-sm p-3 mb-4">
                <h3>觀點摘要</h3>
                <div class="card-body">
                    <div class="d-flex align-items-center mb-2">
                        <i class="bi bi-chat-right-quote fs-2 me-2 mb-1"></i>
                        <div>
                            <div class="fw-bold">外電摘錄</div>
                            <div class="text-muted small">來源：路透社 Reuters ｜ 2025/12/09</div>
                        </div>
                    </div>
                    <h5 class="card-title">美聯準會決策力挺金融市場</h5>
                    <p class="card-text">
                        「美國聯準會維持基準利率不變，市場普遍認為有助穩定投資人信心。歐洲主要股市小幅收漲。」
                    </p>
                    <a href="https://www.reuters.com/markets/us/fed-keeps-rates-steady-market-reactions-2025-12-09/"
                        class="btn btn-outline-secondary btn-sm" target="_blank" rel="noopener">
                        查看完整原文 <i class="bi bi-box-arrow-up-right"></i>
                    </a>
                </div>
            </div>
        </section>





    </main>

    <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>


    <footer class="p-2 text-bg-dark">
        <p class="text-center fs-6">財經資訊網站</p>
    </footer>






    <script src="./bootstrap-5.3.8-dist/js/bootstrap.js"></script>
    <script>
        function formatChange(item) {
            if (!item) return "-";
            const diff = item.regularMarketChangePercent;
            if (diff === undefined) return "-";
            const sign = diff >= 0 ? "+" : "";
            return `${sign}${diff.toFixed(2)}%`;
        }

        function renderMarketTable(marketData) {
            let html = `<div class='table-responsive'>`;
            html += `<table class='table table-hover'>`;
            html += `<thead><tr><th>指數名稱</th><th>收盤指數</th><th>昨日漲跌幅</th></tr></thead><tbody>`;
            for (let i = 0; i < marketData.length; i++) {
                const item = marketData[i];
                let isUp = item.change.startsWith("+");
                let arrow = isUp
                    ? "<span style='color:red'>&#9650;</span>"
                    : "<span style='color:green'>&#9660;</span>";
                let color = isUp ? "text-danger" : "text-success";
                html += `<tr><td>${item.name}</td><td>${item.value}</td><td class='${color}'>${arrow} ${item.change.replace('+', '').replace('-', '')}</td></tr>`;
            }
            html += `</tbody></table></div>`;
            document.getElementById("market-table-js").innerHTML = html;
        }

        async function fetchMarketData() {
            const proxy = "https://cors-anywhere.herokuapp.com/";
            const symbols = "^TWII,^DJI,^IXIC,^GSPC,^N225";
            const url = proxy + `https://query1.finance.yahoo.com/v7/finance/quote?symbols=${symbols}`;
            try {
                const res = await fetch(url, {
                    headers: {
                        'Origin': location.origin,
                        'X-Requested-With': 'XMLHttpRequest'
                    }
                });
                const json = await res.json();
                const result = json.quoteResponse.result;
                const marketData = [
                    {
                        name: "S&P500",
                        value: result.find(x => x.symbol === "^GSPC")?.regularMarketPrice ?? "-",
                        change: formatChange(result.find(x => x.symbol === "^GSPC"))
                    },
                    {
                        name: "納斯達克指數",
                        value: result.find(x => x.symbol === "^IXIC")?.regularMarketPrice ?? "-",
                        change: formatChange(result.find(x => x.symbol === "^IXIC"))
                    },
                    {
                        name: "道瓊指數",
                        value: result.find(x => x.symbol === "^DJI")?.regularMarketPrice ?? "-",
                        change: formatChange(result.find(x => x.symbol === "^DJI"))
                    },
                    {
                        name: "台灣加權",
                        value: result.find(x => x.symbol === "^TWII")?.regularMarketPrice ?? "-",
                        change: formatChange(result.find(x => x.symbol === "^TWII"))
                    },
                    {
                        name: "日經225",
                        value: result.find(x => x.symbol === "^N225")?.regularMarketPrice ?? "-",
                        change: formatChange(result.find(x => x.symbol === "^N225"))
                    }
                ];
                renderMarketTable(marketData);
            } catch (e) {
                renderMarketTable([
                    { name: "S&P500", value: "6,812.63", change: "-0.53%" },
                    { name: "納斯達克指數", value: "23,275.92", change: "-0.38%" },
                    { name: "道瓊指數", value: "47,289", change: "+5.6%" },
                    { name: "台灣加權", value: "17,500.12", change: "+0.21%" },
                    { name: "日經225", value: "33,200.88", change: "-0.12%" }
                ]);
            }
        }

        // 頁面載入自動執行
        fetchMarketData();
    </script>
</body>

</html>